import{k as q,r as b,a8 as J,z as O,aa as X,D as k,E as x,K as y,Q as t,M as F,G as R,ae as Y,ab as Z,ac as ee,af as te,S as U,U as S,a1 as le,F as ae,ad as ne}from"./index-ClgZacms.js";import{g as re,f as se}from"./tag-DA6zjKsg.js";import{g as G}from"./persona-ymxrBoH5.js";const oe={class:"persona-page"},ie={class:"characteristic-page"},ce={class:"skill"},ue={class:"fusion-page"},de={key:0},pe=["onClick"],he={key:0},fe={key:1},ge=q({__name:"PersonaPage",setup(ve){const T=b([]),E=b([]),N=b([]),L=b([]),C=J();let w=+Y().params.id;const B=b(3),D=b(10),H=b(window.innerWidth),P=()=>{H.value<500?D.value=5:D.value=10},M=({columnIndex:n,row:a})=>a[0].level===1&&(a[0].colSpan=0,a[1].colSpan=2,n===0)?{display:"none"}:{"text-align":"center"},K=({columnIndex:n})=>{switch(n){case 0:return{"text-align":"center"};case 1:return{"text-align":"center"};case 2:return{"text-align":"center"};case 3:return{"text-align":"center","background-color":"#F7C477"};case 4:return{"text-align":"center","background-color":"#FFA51E"};case 5:return{"text-align":"center","background-color":"#FF8585"};case 6:return{"text-align":"center","background-color":"#96B0FF"};case 7:return{"text-align":"center","background-color":"#EBEC5A"};case 8:return{"text-align":"center","background-color":"#99E849"};case 9:return{"text-align":"center","background-color":"#FFA8FF"};case 10:return{"text-align":"center","background-color":"#96ACEE"};case 11:return{"text-align":"center","background-color":"#FFFFCC"};case 12:return{"text-align":"center","background-color":"#D2D2C6"}}},V=()=>{let n={},a=[];Z().then(e=>{n=e[w-1],ee().then(c=>{a=c,E.value=[{characteristicName:T.value[0].characteristic,characteristicDetail:a[n.characteristic-1].skillDetail}],N.value=(()=>{const r=[],o=n.skill,s=T.value[0].skill;for(let i=0;i<o.length;i++)r.push({skillName:s[i],skillDetail:a[o[i]-1].skillDetail});return r})(),Q()})})},W={},Q=()=>{te().then(n=>{const a=C.personaDetails[w-1],e=a.resultType;B.value=e;const c=[];if(e==1){const r=n[a.arcana-1].arcanaFusion,o=[1,1e3],s=A(a.arcana),i=a.level;for(let l=0;l<s.length;l++)if(s[l].level<i&&s[l].resultType==1)o[0]=s[l].level;else if(s[l].level>i&&s[l].resultType==1){o[1]=i;break}for(let l=0;l<r.length-1;l+=2){const g=r[l],v=r[l+1],d=A(g),p=A(v);for(let h=0;h<d.length;h++){const u=d[h];if(u.fusionType<=3)for(let _=0;_<p.length;_++){const m=p[_],I=Math.floor((u.level+m.level)/2+1);u.fusionType===2&&m.fusionType===2&&z[u.id]===m.id||u.fusionType===3&&m.fusionType!==3||u.fusionType!==3&&m.fusionType===3||I>o[0]&&I<=o[1]&&m.fusionType<=3&&c.push([u,m])}}}const f=s.filter(l=>l.id!==w&&l.fusionType<=2);for(let l=0;l<f.length;l++){const g=f[l];for(let v=l+1;v<f.length;v++){const d=f[v];if(!(g.level<i&&d.level<i)&&z[g.id]!==d.id&&d.level>i){let p=v,h=d.level;for(;p>=0&&f[p].level>i;)p!==l&&p!==v&&f[p].resultType==1&&(h=f[p].level),p--;let u=Math.floor((g.level+d.level)/2+1),_=h===d.level;u>=i&&u<=h&&_?c.push([g,d]):u>=i&&u<h&&!_&&c.push([g,d])}}}}else if(e==2){const r=a.fusionList;if(r===void 0)throw console.error("未添加合成信息!");let o=[];for(let s=0;s<r.length;s++)o.push(C.personaDetails[r[s]-1]);c.push(o)}else c.push([{id:0,name:a.name,level:0,arcana:0,skill:[],characteristic:0,fusionType:a.fusionType,resultType:0,arcanaName:""}]);L.value=c})},A=n=>n in W?W[n]:C.personaDetails.slice(j[n-1][0],j[n-1][1]),$=n=>{w=n,G().then(a=>{T.value=[a[w-1]],V()})};O(()=>{G().then(n=>{T.value=[n[w-1]],V()}),window.addEventListener("resize",P),P()}),X(()=>{window.removeEventListener("resize",P)});const j=[[0,17],[17,28],[28,37],[37,46],[46,55],[55,62],[62,71],[71,82],[82,91],[91,103],[103,114],[114,124],[124,134],[134,147],[147,156],[156,165],[165,174],[174,183],[183,196],[196,204],[204,213],[213,222],[222,230]],z={25:51,163:164,69:210};return(n,a)=>{const e=se,c=re;return k(),x(R,null,[y("div",oe,[t(c,{data:T.value,border:"",style:{width:"100%"},"header-cell-style":{"text-align":"center"},"cell-style":K},{default:F(()=>[t(e,{label:"名称","min-width":D.value,class:"name"},{default:F(r=>[y("div",null,[y("a",{href:"",onClick:a[0]||(a[0]=U(()=>{},["prevent"]))},S(r.row.name),1)])]),_:1},8,["min-width"]),t(e,{prop:"arcana",label:"阿尔卡纳","min-width":D.value,class:"arcana"},null,8,["min-width"]),t(e,{prop:"level",label:"基础等级","min-width":D.value,class:"level"},null,8,["min-width"]),t(e,{prop:"physics",label:"物","min-width":"4"}),t(e,{prop:"gun",label:"枪","min-width":"4"}),t(e,{prop:"fire",label:"火","min-width":"4"}),t(e,{prop:"ice",label:"冰","min-width":"4"}),t(e,{prop:"electricity",label:"电","min-width":"4"}),t(e,{prop:"wind",label:"风","min-width":"4"}),t(e,{prop:"cognition",label:"念","min-width":"4"}),t(e,{prop:"nuclear",label:"核","min-width":"4"}),t(e,{prop:"bless",label:"祝","min-width":"4"}),t(e,{prop:"curse",label:"咒","min-width":"4"})]),_:1},8,["data"])]),y("div",ie,[t(c,{data:E.value,border:"",style:{width:"100%"},"header-cell-style":M,"cell-style":{"text-align":"center"}},{default:F(()=>[t(e,{prop:"characteristicName",label:"特性","min-width":"29"}),t(e,{prop:"characteristicDetail",label:"特性","min-width":"71"})]),_:1},8,["data"])]),y("div",ce,[t(c,{data:N.value,border:"",style:{width:"100%"},"header-cell-style":M,"cell-style":{"text-align":"center"}},{default:F(()=>[t(e,{prop:"skillName",label:"技能","min-width":"29"}),t(e,{prop:"skillDetail",label:"技能","min-width":"71"})]),_:1},8,["data"])]),y("div",ue,[t(c,{data:L.value,border:"",style:{width:"100%"},"header-cell-style":{"text-align":"center"},"cell-style":{"text-align":"center"}},{default:F(()=>[t(e,{label:"反向合成表"},{default:F(r=>[B.value<=2?(k(),x("span",de,[(k(!0),x(R,null,le(r.row,(o,s)=>(k(),x("span",{key:s},[y("a",{href:"",onClick:U(i=>$(o.id),["prevent"])},S(o.arcanaName+"LV"+o.level+o.name),9,pe),s<r.row.length-1?(k(),x("span",he," + ")):ae("",!0)]))),128))])):(k(),x("span",fe,S(r.row[0].name+(r.row[0].fusionType==3?"为宝魔":"为未解禁面具")+"不可合成"),1))]),_:1})]),_:1},8,["data"])])],64)}}}),_e=ne(ge,[["__scopeId","data-v-388a5ce3"]]);export{_e as default};
